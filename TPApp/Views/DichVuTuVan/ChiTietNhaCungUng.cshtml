@model TPApp.ViewModel.ChiTietNhaCungUngVm
@{
    Layout = "_Layout";
}

<div class="columns-container">
    <div class="container" id="columns">
        <div class="row">

            <!-- CENTER -->
            <div class="center_column col-xs-12 col-sm-9" id="center_column">
                <div id="product">

                    <!-- IMAGE + INFO -->
                    <div class="product-images images zoom-enabled pic-pro img-box">
                        <div class="pb-left-column col-xs-12 col-sm-6">
                            <div class="product-image">
                                <div class="product-full">
                                    <a href="@Model.ImageUrl" class="simpleLens-lens-image">
                                        <img src="@Model.ImageUrl"
                                             class="simpleLens-big-image"
                                             data-big-image="@Model.ImageUrl" />
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="pb-right-column col-xs-12 col-sm-6">
                            <h1 class="product-name">@Model.FullName</h1>

                            <div class="product-desc">
                                <div class="product-star">
                                    <span style="color:gold">
                                        @Html.Raw(new string('★', (int)Model.Rating) + new string('☆', 5 - (int)Model.Rating))
                                    </span>
                                    <span>@Model.LuotDanhGia</span>
                                    <span class="author">
                                        <i class="fa fa-user"></i> @Model.LuotXem
                                    </span>
                                </div>
                                Địa chỉ: @Model.DiaChi
                            </div>

                            <div>Điện thoại: <i>@Model.Phone</i></div>
                            <div>Fax: <i>@Model.Fax</i></div>
                            <div>Email: <i>@Model.Email</i></div>
                            <div>Website: <i>@Model.Website</i></div>
                            <div>Người đại diện: <i>@Model.NguoiDaiDien</i></div>
                            <div>Chức vụ: <i>@Model.ChucVu</i></div>

                            <div class="form-action">
                                <div class="button-group">
                                    <a class="btn-add-cart" href="#">Chọn nhà cung ứng</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TAB -->
                    <div class="tab-container product-tabModify">

                        <li class="activedTitle">
                            <a href="#product-detail">LĨNH VỰC</a>
                        </li>
                        <div id="product-detail" class="tab-panel active">
                            @Html.Raw(Model.LinhVucText)
                        </div>

                        <li class="activedTitle">
                            <a href="#product-detail">CHỨC NĂNG</a>
                        </li>
                        <div id="product-detail" class="tab-panel active">
                            @Html.Raw(Model.ChucNang)
                        </div>

                        <li class="activedTitle">
                            <a href="#information">DỊCH VỤ</a>
                        </li>
                        <div id="information" class="tab-panel active">
                            @Html.Raw(Model.DichVuText)
                        </div>

                        <li class="activedTitle">
                            <a href="#reviews">SẢN PHẨM</a>
                        </li>
                        <div id="reviews" class="tab-panel active">
                            @Html.Raw(Model.SanPham)
                        </div>

                    </div>

                    <!-- NHÀ CUNG ỨNG KHÁC -->
                    @if (Model.NhaCungUngKhac?.Any() == true)
                    {
                        <div class="page-product-box">
                            <h2 class="brand-showcase-title">NHÀ CUNG ỨNG KHÁC</h2>
                            <ul class="product-list owl-carousel"
                                data-dots="false"
                                data-loop="true"
                                data-nav="true"
                                data-margin="30"
                                data-autoplaytimeout="1000"
                                data-autoplayhoverpause="true"
                                data-responsive='{"0":{"items":2},"600":{"items":4},"1000":{"items":4}}'>
                                @foreach (var n in Model.NhaCungUngKhac)
                                {
                                    <li class="GioHang">
                                        <div class="product-container">
                                            <h2 class="entry_title">@n.FullName</h2>
                                            <img src="@n.ImageUrl" class="img-responsive" />
                                            <div>📍 @n.DiaChi</div>
                                            <div>📞 @n.Phone</div>

                                            @{
                                                var rating = Math.Clamp(n.Rating, 0, 5);
                                            }

                                            <div style="color:gold">
                                                @Html.Raw(new string('★', rating) + new string('☆', 5 - rating))
                                            </div>
                                        </div>
                                    </li>
                                }

                            </ul>
                        </div>
                    }


                    @await Component.InvokeAsync("ProductPortletIOSanpham")
                </div>
            </div>

            <!-- LEFT -->
            <div class="column col-xs-12 col-sm-3" id="left_column">
                <div class="block left-module">
                    <p class="title_block">DANH MỤC</p>
                    <div class="block_content">
                        <ul class="tree-menu">
                            @foreach (var c in Model.Categories)
                            {
                                <li>
                                    <a href="@c.Url">@c.Name</a>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {

            $(".GioHang").hover(
                function () { $(this).find(".button-group").show(); },
                function () { $(this).find(".button-group").hide(); }
            );

            $("#product-detail p, #product-detail span, #product-detail div").removeAttr("style");
            $("#information p, #information span, #information div").removeAttr("style");
            $("#reviews p, #reviews span, #reviews div").removeAttr("style");

            $(".owl-carousel").owlCarousel({
                items: 4,
                loop: true,
                nav: true,
                dots: false,
                margin: 30,
                autoplay: true,
                autoplayTimeout: 3000,
                autoplayHoverPause: true,
                responsive: {
                    0: { items: 2 },
                    600: { items: 4 },
                    1000: { items: 4 }
                }
            });

        });
    </script>
}
