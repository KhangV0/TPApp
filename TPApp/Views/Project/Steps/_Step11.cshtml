@model TPApp.ViewModel.StepContentVm

@{
    var liquidation = Model.StepData as TPApp.Entities.LiquidationReport;
}

<div class="card shadow-sm">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
        <h5 class="mb-0"><i class="fas fa-file-invoice-dollar"></i> Bước 11: Thanh lý</h5>
        @if (liquidation != null)
        {
            <button class="btn btn-light btn-sm edit-step-btn" data-step="11" data-project-id="@Model.ProjectId">
                <i class="fas fa-edit"></i> Chỉnh sửa
            </button>
        }
    </div>
    <div class="card-body">
        @if (liquidation != null)
        {
            <dl class="row">
                <dt class="col-sm-3">Giá trị thanh toán còn lại:</dt>
                <dd class="col-sm-9">
                    @if (liquidation.GiaTriThanhToanConLai.HasValue)
                    {
                        <span class="badge bg-info fs-6">@liquidation.GiaTriThanhToanConLai.Value.ToString("N0") VNĐ</span>
                    }
                    else
                    {
                        <span class="text-muted">0 VNĐ</span>
                    }
                </dd>

                <dt class="col-sm-3">Số hóa đơn:</dt>
                <dd class="col-sm-9"><strong>@(liquidation.SoHoaDon ?? "Chưa có")</strong></dd>

                <dt class="col-sm-3">Đã chuyển tiền:</dt>
                <dd class="col-sm-9">
                    @if (liquidation.SanDaChuyenTien)
                    {
                        <span class="badge bg-success"><i class="fas fa-check"></i> Đã chuyển</span>
                    }
                    else
                    {
                        <span class="badge bg-warning"><i class="fas fa-times"></i> Chưa chuyển</span>
                    }
                </dd>

                <dt class="col-sm-3">Hợp đồng đã đóng:</dt>
                <dd class="col-sm-9">
                    @if (liquidation.HopDongClosed)
                    {
                        <span class="badge bg-success"><i class="fas fa-check"></i> Đã đóng</span>
                    }
                    else
                    {
                        <span class="badge bg-secondary"><i class="fas fa-clock"></i> Chưa đóng</span>
                    }
                </dd>
            </dl>
        }
        else
        {
            <p class="text-muted">Chưa có dữ liệu cho bước này.</p>
        }
    </div>
    <div class="card-footer">
        <button class="btn btn-secondary step-nav-btn" data-step="@(Model.StepNumber - 1)">
            <i class="fas fa-arrow-left"></i> Quay lại
        </button>
    </div>
</div>
